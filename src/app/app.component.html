<div class="main-container">

  <!-- Categories -->
  <div class="category-list">
    <h3>Categories</h3>

    <div
      *ngFor="let cat of categories$ | async"
      (click)="selectCategory(cat)"
      [class.active]="cat.id === selectedCategoryId"
      class="category-btn"
    >
      {{ cat.name }}
    </div>
  </div>

  <!-- Items Grid -->
  <div class="items-grid-section">
    <div class="items-grid">
      
      <div *ngIf="!selectedCategoryId" class="placeholder">
        Please select a category
      </div>

      <div *ngFor="let item of items$ | async" class="item-card">

        <!-- Image -->
        <img
          class="item-image"
          [src]="item.imageUrl"
          [alt]="item.name"
        />

        <!-- Content -->
        <div class="item-content">
          <div class="item-name">{{ item.name }}</div>

          <div class="item-info-row">
            <span class="price">â‚¹{{ item.price }}</span>
            <span class="stock">
              <ng-container *ngIf="item.stock > 0; else soldOut">
                In-Stock: {{ item.stock }}
              </ng-container>
              <ng-template #soldOut>
                <span class="sold-out-text">SOLD OUT</span>
              </ng-template>
            </span>
          </div>

          <button
            class="add-btn"
            [disabled]="isAddDisabled(item)"
            (click)="addToCart(item)"
          >
            âž• Add
          </button>
        </div>
      </div>
    
    </div>
  </div>

  <!-- Cart -->
  <!-- Cart Sidebar -->
<div class="cart-panel">
  <h3>Your Cart</h3>

  <div *ngIf="cart.length === 0" class="empty-cart">
    <div class="empty-image-container">
      <img src="https://img.freepik.com/premium-vector/supermarket-shopping-cart-concept-illustration_114360-22408.jpg?semt=ais_hybrid&w=740&q=80" alt="Empty Cart" />
    </div>
    <div class="empty-text">Your cart is empty</div>
  </div>

  <!-- Cart Items List -->
<div *ngFor="let ci of cart" class="cart-item">
  <div class="cart-item-row">

    <!-- Item Name -->
    <div class="cart-item-name">
      {{ ci.item.name }}
    </div>

    <!-- Quantity Controls -->
    <div class="cart-qty-controls">
      <button (click)="decrementCartItem(ci)">âˆ’</button>
      <span>{{ ci.quantity }}</span>
      <button (click)="incrementCartItem(ci)" [disabled]="ci.quantity >= ci.item.stock">+</button>
    </div>

    <!-- Total Price -->
    <div class="cart-item-price">
      â‚¹{{ ci.item.price * ci.quantity }}
    </div>

    <!-- Remove Button -->
    <button class="cart-remove-btn" (click)="removeFromCart(ci)">
      âœ–
    </button>

  </div>
</div>


  <div *ngIf="cart.length > 0" class="cart-summary">
    <div class="total">
      <span>Total:</span>
      <span>â‚¹{{ total.toFixed(2) }}</span>
    </div>

    <!-- Payment Method -->
    <div class="payment-method">
      <label>
        <input type="radio" name="payment" (change)="selectedPaymentMethod='UPI'"> UPI
      </label>
      <label>
        <input type="radio" name="payment" (change)="selectedPaymentMethod='CASH'"> CASH
      </label>
    </div>

    <button class="order-btn" [disabled]="!selectedPaymentMethod" (click)="placeOrder()">
      ðŸ›’ Place Order
    </button>
  </div>
</div>
